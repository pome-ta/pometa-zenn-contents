---
title: '【module 編】#2: a-Shell(mini) でアプリをつくる【Rubicon-ObjC】'
emoji: '🧳'
type: 'tech' # tech: 技術記事 / idea: アイデア
topics: ['Python', 'iOS', 'objectivec', 'a-shell', 'rubiconobjc']
published: false
---


# はじめに

iPhone, iPad の無料アプリ[a-Shell](https://holzschu.github.io/a-Shell_iOS/) を使って、[UIKit](https://developer.apple.com/jp/documentation/uikit/) を呼び出し、アプリをつくります(Store への公開はできません)。


今回表示されるView の結果は、前回と変わりありません。1 ファイル（`singleFileSample.py`）だったコードをmodule 化し、見通しをよくするのが目的です。
今後訪れるアプリ開発においても、実装したいコードに集中できる利点があります。

分割作業と同時にコードの補足を随所に入れていきます。不明瞭な部分の解決に繋がれば幸いです。



## 全 3 部構成の第 2 部です

この記事を含め、3 部構成で解説をしていきます:

- 【基本編】#1: a-Shell(mini) でアプリをつくる【Rubicon-ObjC】

  - a-Shell 実行の大まかな流れ
  - 1 ファイルのみの簡易な実装

- 【module 編】#2: a-Shell(mini) でアプリをつくる【Rubicon-ObjC】

  - （今回はここ）
  - 1 ファイルだったコードを module へ分割
  - 各部コードの説明
  - アプリ制作のための環境整備

- 【アプリ制作編】#3: a-Shell(mini) の Python で UIKit から View を呼び出す【Rubicon-ObjC】
  - Rubicon-ObjC を使った実装の流れ
  - Swift, Objective-C のコードを Rubicon-ObjC へ落とし込み

3 つの記事を通したコードは、GitHub で公開しています。

@[card](https://github.com/pome-ta/a-Shell_Rubicon-ObjC_UIKitSamples)

:::message
(一応)a-Shell 以外に [Pythonista for iOS](https://omz-software.com/pythonista/index.html) で、挙動確認をしています。
:::


## ディレクトリ構成

[GitHub のリポジトリ](https://github.com/pome-ta/a-Shell_Rubicon-ObjC_UIKitSamples) は、以下の構成です。


```shell:
[~a-Shell_Rubicon-ObjC_UIKitSamples]$ tree
.
├── README.md
├── (exampleSFSymbolsViewer.py: 次回)
├── pyrubicon
│   └── objc
│       ├── __init__.py
│       ├── api.py
│       ├── collections.py
│       ├── ctypes_patch.py
│       ├── eventloop.py
│       ├── runtime.py
│       └── types.py
├── rbedge
│   ├── __init__.py
│   ├── app.py
│   ├── enumerations.py
│   ├── functions.py
│   ├── lifeCycle.py
│   ├── objcMainThread.py
│   ├── pdbr.py
│   └── rootNavigationController.py
├── (singleFileSample.py: 前回)
└── withModuleToSample.py
```


`pyrubicon` ディレクトリは『[【非推奨】Rubicon-ObjC の手動インストール・インポート](https://zenn.dev/pometa/articles/466cd4b39f9684)』の方法で格納しています。

@[card](https://zenn.dev/pometa/articles/466cd4b39f9684)


`rbedge` ディレクトリが、module の機能を持ちます。`singleFileSample.py` を分割したものたちです。




# `rbedge` module


「**r**u**b**icon 川の橋（bridge）の端（edge）」

として、`rbedge` と命名してみました。別のmodule 名でも問題ありません。


## `__init__.py`

## `enumerations.py`

## `functions.py`

## `lifeCycle.py`

## `objcMainThread.py`

## `rootNavigationController.py`

## `app.py`

## `pdbr.py`



# main となる`viewController`

## `withModuleToSample.py`



# おわりに

a-Shell アプリ自身と、Python 実装での ViewController 連携ができました。繋ぎ込みの部分は多少 hacky になってしまいましたが、各コードの役割を掴んでもらえていたら嬉しいです。


次回はこのmodule も活用し、オリジナルなアプリを開発します。Xcode は、Storyboard とコード両方を使う開発になりますが、a-Shell では全てコードベースで開発をします。

